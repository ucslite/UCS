<%--
 =================================================================
  Licensed Materials - Property of IBM

  WebSphere Commerce

  (C) Copyright IBM Corp. 2014 All Rights Reserved.

  US Government Users Restricted Rights - Use, duplication or
  disclosure restricted by GSA ADP Schedule Contract with
  IBM Corp.
 =================================================================
--%>

<%-- START SKUList_Table.jspf --%>

<div class="fullView" id="WC_Sku_List_Table_Full_${productId}">
	<div class="row tableHeader" role="row" id="WC_Sku_List_Row_Header_${productId}">		
		<div role="columnheader" class="expandButton columnHeader anchored">
			<div class="cell"></div>
		</div>
		
		<c:forEach var="skuAttributeMap" items="${skuList[0]}">
			<div role="columnheader" class="${skuAttributeMap.name} col2 columnHeader ${skuAttributeMap.anchored ? 'anchored' : 'unanchored'}">
				<div class="cell">
					<c:out value="${skuAttributeMap.displayName}" />
				</div>
			</div>
		</c:forEach>
	</div>
	
	<c:forEach var="skuAttributeList" items="${skuList}" varStatus="row">	
		<c:set var="skuId" value="${skuAttributeList[0].itemId}" />
		
		<div role="row" class="row entry full" id="WC_Sku_List_Row_Content_${skuId}">
			<div role="gridcell" class="gridCell expandButton anchored">
				<div class="cell" id="WC_Sku_List_TableContent_${productId}_expandButton_${row.count}_${col.count}">
					<span class="spanacce">
						<label for="DropDownButton_${productId}_${row.count}">
							<fmt:message key="SKU_LIST_EXPAND_DROPDOWN" bundle="${widgetText}"/>
						</label>
					</span>
					<div class="dropDownButton" role="button" id="DropDownButton_${productId}_${row.count}" tabindex="0" 
							onclick="SKUListJS.toggleExpandedContent('${productId}','${row.count}','${skuId}')"
							onkeypress="if(event.keyCode == 0 || event.keyCode == 13){SKUListJS.toggleExpandedContent('${productId}','${row.count}','${skuId}')}"
							aria-label="<fmt:message key="SKULIST_EXPAND_AREA" bundle="${widgetText}"/>" aria-expanded="false" aria-controls="WC_Sku_List_ExpandedContent_${productId}_${row.count}">
						<div class="dropDownArrow" id="DropDownArrow_${productId}_${row.count}"></div>
					</div>
				</div>
			</div>
			
			<c:forEach var="skuAttributeMap" items="${skuAttributeList}" varStatus="col">
				<c:set var="cellName" value="${skuAttributeMap.name}"/>
				<c:set var="cellValue" value="${skuAttributeMap.value}"/>
				<c:set var="cellUrl" value="${skuAttributeMap.url}"/>
				
				<c:choose>
					<c:when test="${cellName eq 'SKU'}">
						<div role="gridcell" class="col2 gridCell ${skuAttributeMap.name} ${skuAttributeMap.anchored ? 'anchored' : 'unanchored'}">
							<div class="cell" id="WC_Sku_List_TableContent_${productId}_${cellName}_${row.count}_${col.count}">
								<c:if test="${!empty cellUrl}">
									<a href="${cellUrl}" id="WC_Sku_List_Link_${productId}_${cellName}_${row.count}_${col.count}"><c:out value="${cellValue}"/></a>
								</c:if>
								<c:if test="${empty cellUrl}">
									<c:out value="${cellValue}"/>
								</c:if>
								<input type="hidden" id="item_sku_${skuAttributeMap.itemId}" value="${cellValue}" />
								<input type="hidden" id="item_name_${skuAttributeMap.itemId}" value="${skuAttributeMap.itemName}" />
								<input type="hidden" id="item_thumbnail_${skuAttributeMap.itemId}" value="${skuAttributeMap.thumbnail}" />
							</div>
						</div>
					</c:when>
					
					<c:when test="${cellName eq 'Quantity'}">
						<div role="gridcell" class="col2 gridCell ${cellName} editable ${skuAttributeMap.anchored ? 'anchored' : 'unanchored'}">
							<div class="cell" id="WC_Sku_List_TableContent_${productId}_${cellName}_${row.count}_${col.count}">
								<span class="spanacce">
									<label for="${skuAttributeMap.itemId}_Quantity_Input">
										<fmt:message key="SKU_LIST_ADDITEM_QUANTITY" bundle="${widgetText}"/>
									</label>
								</span>
								<input type="text" id="${skuAttributeMap.itemId}_Quantity_Input" class="input_field" onchange="SKUListJS.updateItemQuantity(this.value,'${productId}','${skuAttributeMap.itemId}')" />
								<div class="invalidQuantity" id="invalidQuantity_${productId}_${skuAttributeMap.itemId}">
									<fmt:message key="SKULIST_INVALID_QUANTITY" bundle="${widgetText}"/>
								</div>
							</div>
						</div>						
					</c:when>
					
					<c:when test="${cellName eq 'InStoreAvailability'}">
						<div role="gridcell" class="col2 gridCell ${cellName} editable ${skuAttributeMap.anchored ? 'anchored' : 'unanchored'}">
							<div class="cell" id="WC_Sku_List_TableContent_${productId}_${cellName}_${row.count}_${col.count}">
								<a class="select_stores link nodisplay" href="javascript:SKUListJS.selectStore('${StoreLocatorView}')" id="WC_Select_Stores_Link_${skuAttributeMap.itemId}"><fmt:message key="SKULIST_SELECT_STORES" bundle="${widgetText}"/></a>
								<a class="check_stores link nodisplay" href="javascript:SKUListJS.checkAvailability('${productId}', '${skuAttributeMap.itemId}')" id="WC_Check_Stores_Link_${skuAttributeMap.itemId}"><fmt:message key="SKULIST_CHECK_STORES" bundle="${widgetText}"/></a>
								<a class="change_stores link nodisplay" href="javascript:SKUListJS.selectStore('${StoreLocatorView}')" id="WC_Change_Stores_Link_${skuAttributeMap.itemId}"><c:out value="${cellValue}"/><fmt:message key="SKULIST_CHANGE_STORES" bundle="${widgetText}"/></a>
							</div>
						</div>
					</c:when>
					
					<c:when test="${cellName eq 'Compare'}">
						<div role="gridcell" class="col2 gridCell ${cellName} editable ${skuAttributeMap.anchored ? 'anchored' : 'unanchored'}">
							<div id="compare_${fn:escapeXml(skuId)}" class="compare_target">
								<input id="comparebox_${fn:escapeXml(skuId)}" type="checkbox" name="comparebox_${fn:escapeXml(skuId)}" value="${skuId}"
									onchange="javascript:shoppingActionsJS.addOrRemoveFromCompare('${fn:escapeXml(skuId)}',this.checked)"/>
								<label for="comparebox_${fn:escapeXml(skuId)}"><fmt:message key="SKULIST_COMPARE" bundle="${widgetText}"/></label>
								<a id="compareButton_${fn:escapeXml(skuId)}" href="javascript:shoppingActionsJS.compareProducts(${categoryIds});" role="button" aria-label="<fmt:message key="SKULIST_COMPARE" bundle="${widgetText}"/>"><fmt:message key="SKULIST_COMPARE" bundle="${widgetText}"/></a>
							</div>
							
							<c:if test="${param.fromPage ne 'compare'}">
								<script>
									if(dojo.byId("comparebox_${fn:escapeXml(skuId)}").checked){
										dojo.addOnLoad(function(){
											dojo.byId("comparebox_${fn:escapeXml(skuId)}").checked = '';
										});
									}
								</script>
							</c:if>
						</div>
					</c:when>
						
					<c:otherwise>
						<div role="gridcell" class="col2 gridCell ${skuAttributeMap.name} ${skuAttributeMap.anchored ? 'anchored' : 'unanchored'}">
							<div class="cell" id="WC_Sku_List_TableContent_${productId}_${cellName}_${row.count}_${col.count}">
								<c:if test="${!empty cellUrl}">
									<a href="${cellUrl}" id="WC_Sku_List_Link_${productId}_${cellName}_${row.count}_${col.count}"><c:out value="${cellValue}"/></a>
								</c:if>
								<c:if test="${empty cellUrl}">
									<c:out value="${cellValue}"/>
								</c:if>
							</div>
						</div>
					</c:otherwise>
				</c:choose>
			</c:forEach>
			
			<div class="row expandedContent nodisplay" id="WC_Sku_List_ExpandedContent_${productId}_${row.count}">
				<c:forEach var="skuAttributeMap" items="${skuAttributeList}" varStatus="col">
					<c:set var="cellName" value="${skuAttributeMap.name}"/>
					<c:set var="cellValue" value="${skuAttributeMap.value}"/>
					<c:set var="cellUrl" value="${skuAttributeMap.url}"/>
					
					<c:choose>
						<c:when test="${!skuAttributeMap.anchored && cellName ne 'Compare'}"> 
							<div role="gridcell" class="${skuAttributeMap.name} expandedCol">
								<div class="entry">
									<div class="leftCol" id="ExpandedContent_Cell_Left_${productId}_${cellName}_${row.count}_${col.count}">
										<c:out value="${skuAttributeMap.displayName}" />
									</div>
									<div class="rightCol" id="ExpandedContent_Cell_Right_${productId}_${cellName}_${row.count}_${col.count}">
										<c:out value="${cellValue}"/>
									</div>
								</div>
							</div>
						</c:when>
						
						<c:when test="${cellName eq 'Compare'}">
							<div role="gridcell" class="${skuAttributeMap.name} expandedCol">
								<div class="entry">
									<div class="leftCol" id="ExpandedContent_Cell_Left_${productId}_${cellName}_${row.count}_${col.count}">
										<c:out value="${skuAttributeMap.displayName}" />
									</div>
									<div class="rightCol" id="ExpandedContent_Cell_Right_${productId}_${cellName}_${row.count}_${col.count}">
										<div id="compare_${fn:escapeXml(skuId)}" class="compare_target">
											<input id="comparebox_expanded_${fn:escapeXml(skuId)}" type="checkbox" name="comparebox_expanded_${fn:escapeXml(skuId)}" value="${skuId}"
												onchange="javascript:shoppingActionsJS.addOrRemoveFromCompare('${fn:escapeXml(skuId)}',this.checked)"/>
											<label for="comparebox_expanded_${fn:escapeXml(skuId)}"><fmt:message key="SKULIST_COMPARE" bundle="${widgetText}"/></label>
											<a id="compareButton_expanded_${fn:escapeXml(skuId)}" href="javascript:shoppingActionsJS.compareProducts(${categoryIds});" role="button" aria-label="<fmt:message key="SKULIST_COMPARE" bundle="${widgetText}"/>"><fmt:message key="SKULIST_COMPARE" bundle="${widgetText}"/></a>
											
											<c:if test="${param.fromPage ne 'compare'}">
												<script>
													if(dojo.byId("comparebox_expanded_${fn:escapeXml(skuId)}").checked){
														dojo.addOnLoad(function(){
															dojo.byId("comparebox_expanded_${fn:escapeXml(skuId)}").checked = '';
														});
													}
												</script>
											</c:if>
										</div>
									</div>
								</div>
							</div>
						</c:when>
					
						<c:otherwise>
						</c:otherwise>
					</c:choose>
				</c:forEach>
			</div>
		</div>
		
	</c:forEach>
	
	<div class="row footer">
		<div class="footerButtons">
			<flow:ifEnabled feature="RequisitionList">
				<a id="${productId}addToShoppingListBtn" role="button" class="button secondary" onkeypress="javascript:MessageHelper.setFocusElement('${productId}addToShoppingListBtn');" title="<fmt:message key="SKU_LIST_ADD_TO_REQUISITION_LIST" bundle="${widgetText}"/>" wairole="button" href="javascript:addReqListsJS${widgetPrefix}.setProductId('${productId}');addReqListsJS${widgetPrefix}.toggleDropDownMenu(true,false,true);">
					<div class="left_border"></div>
					<div class="button_text"><span><fmt:message key="SKU_LIST_ADD_TO_REQUISITION_LIST" bundle="${widgetText}"/></span></div>
					<div class="right_border"></div>
				</a>
			</flow:ifEnabled>
			
			<a id="SKU_List_Widget_Add2CartButton_${productId}" role="button" class="button primary" onkeypress="javascript:MessageHelper.setFocusElement('SKU_List_Widget_Add2CartButton_${productId}');" title="<fmt:message key="SKU_LIST_ADD_TO_CURRENT_ORDER" bundle="${widgetText}"/>" wairole="button" href="javascript:setCurrentId('SKU_List_Widget_Add2CartButton_${productId}');SKUListJS.addSkus2ShopCartAjax('${productId}');">
				<div class="left_border"></div>
				<div class="button_text"><span><fmt:message key="SKU_LIST_ADD_TO_CURRENT_ORDER" bundle="${widgetText}"/></span></div>
				<div class="right_border"></div>
			</a>
		</div>
	</div>
</div>

<%@ include file="/Widgets_701/Common/InventoryAvailability/StoreDetailsPopup.jspf" %>

<%-- END SKUList_Table.jspf --%>